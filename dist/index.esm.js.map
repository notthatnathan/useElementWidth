{"version":3,"file":"index.esm.js","sources":["../src/index.js"],"sourcesContent":["import { useCallback, useEffect, useState } from 'react'\n\n/**\n * Returns current width of specified element.\n *\n * @param {Ref} ref element to use in width calculation\n */\nconst useElementWidth = ref => {\n  // handle ssr\n  if (!window?.ResizeObserver) return;\n\n  const getWidth = useCallback(() => {\n    return ref?.current?.getBoundingClientRect().width * (window.visualViewport?.scale || 1) || 0\n  }, [ref?.current])\n  const [width, setWidth] = useState(0)\n\n  const elObserver = new ResizeObserver(entries => {\n    window.requestAnimationFrame(() => {\n      if (!ref?.current) return\n\n      if (entries?.[0]?.contentBoxSize?.[0]) {\n        setWidth(entries[0].contentBoxSize[0].inlineSize)\n      } else if (entries?.contentBoxSize) {\n        setWidth(entries[0].contentBoxSize.inlineSize)\n      } else {\n        setWidth(entries[0].contentRect.width)\n      }\n    })\n  })\n\n  useEffect(() => {\n    setWidth(getWidth())\n  }, [ref?.current])\n\n  useEffect(() => {\n    if (!ref?.current) return\n\n    elObserver.observe(ref?.current)\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      if (!ref?.current) return\n      elObserver.unobserve(ref?.current)\n    }\n  })\n\n  return width\n}\n\nexport default useElementWidth\n"],"names":["ref","window","_window","ResizeObserver","getWidth","useCallback","current","getBoundingClientRect","width","visualViewport","scale","useState","setWidth","elObserver","entries","requestAnimationFrame","_entries$","contentBoxSize","_entries$$contentBoxS","inlineSize","contentRect","useEffect","observe","unobserve"],"mappings":"gFAOwB,SAAAA,SAEtB,aAAKC,qBAAAC,EAAQC,eAAb,CAEA,IAAMC,EAAWC,EAAY,mBAC3B,OAAOL,MAAAA,aAAAA,EAAKM,8BAASC,wBAAwBC,mBAASP,OAAOQ,qCAAgBC,QAAS,IAAM,GAC3F,CAACV,MAAAA,SAAAA,EAAKM,YACiBK,EAAS,GAA5BH,OAAOI,OAERC,EAAa,IAAIV,eAAe,SAAAW,GACpCb,OAAOc,sBAAsB,mBACtBf,MAAAA,GAAAA,EAAKM,UAENQ,MAAAA,aAAAA,EAAU,2BAAVE,EAAcC,6BAAdC,EAA+B,GACjCN,EAASE,EAAQ,GAAGG,eAAe,GAAGE,YAEtCP,EADSE,MAAAA,GAAAA,EAASG,eACTH,EAAQ,GAAGG,eAAeE,WAE1BL,EAAQ,GAAGM,YAAYZ,YAqBtC,OAhBAa,EAAU,WACRT,EAASR,MACR,CAACJ,MAAAA,SAAAA,EAAKM,UAETe,EAAU,WACR,GAAKrB,MAAAA,GAAAA,EAAKM,QAKV,OAHAO,EAAWS,QAAQtB,MAAAA,SAAAA,EAAKM,oBAIjBN,MAAAA,GAAAA,EAAKM,SACVO,EAAWU,UAAUvB,MAAAA,SAAAA,EAAKM,YAIvBE"}